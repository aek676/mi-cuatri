---
import Avatar from '@/components/Avatar.astro';
import type { UserDetailDto } from '@/lib/api';
import { Icon } from 'astro-icon/components';

interface Props {
  user: UserDetailDto;
  sessionToken?: string;
}

const { user, sessionToken } = Astro.props;
---

<section
  class="bg-linear-to-br from-brand-dark to-brand-main h-[35vh] flex items-end justify-center relative"
>
  <div class="absolute -bottom-16 left-1/2 -translate-x-1/2">
    <div
      class="w-[180px] h-[180px] rounded-full border-[6px] border-white shadow-xl bg-brand-light overflow-hidden flex items-center justify-center"
    >
      <Avatar
        avatarUrl={user.avatar}
        sessionToken={sessionToken}
        size={180}
        alt={`${user.given} ${user.family}`}
        className=""
      />
    </div>
  </div>
</section>

<div class="min-h-[35vh] bg-white pt-20 px-4 pb-12">
  <div class="container mx-auto max-w-4xl text-center">
    <div class="mb-12">
      <h1 class="text-4xl font-bold mb-2 text-brand-dark">
        {`${user.given} ${user.family}`}
      </h1>
    </div>

    <div class="grid grid-cols-1 gap-6 text-left max-w-lg mx-auto">
      <div
        class="bg-brand-pale p-6 rounded-2xl flex items-center gap-4 hover:-translate-y-0.5 transition-transform"
      >
        <div class="p-3 rounded-full bg-white/50">
          <Icon
            name="mdi:email"
            class="w-6 h-6 text-brand-main"
            aria-hidden="true"
          />
        </div>
        <div>
          <span
            class="text-xs uppercase tracking-widest font-bold opacity-60 block"
          >
            Correo Electr√≥nico
          </span>
          <p class="text-xl font-medium mt-1 text-brand-dark">
            {user.email}
          </p>
        </div>
      </div>
    </div>

    <div class="mt-16">
      <slot />
    </div>
  </div>
</div>
