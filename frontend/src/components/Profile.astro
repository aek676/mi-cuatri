---
import Avatar from '@/components/Avatar.astro';
import type { UserDetailDto } from '@/lib/api';
import { Icon } from 'astro-icon/components';

interface Props {
  user: UserDetailDto;
  sessionToken?: string;
}

const { user, sessionToken } = Astro.props;
---

<div class="flex-1 flex flex-col p-6 overflow-y-auto" role="region" aria-labelledby="profile-heading">
  <div class="flex flex-col items-center mb-8">
    <div
      class="w-24 h-24 rounded-full border-4 border-white bg-white shadow-md overflow-hidden mb-4 ring-2 ring-brand-light/20"
    >
      <Avatar
        avatarUrl={user.avatar}
        sessionToken={sessionToken}
        size={96}
        alt={`Avatar de ${user.given}`}
        className="w-full h-full object-cover"
      />
    </div>

    <h1 id="profile-heading" class="text-xl font-bold text-brand-dark text-center">
      {`${user.given} ${user.family}`}
    </h1>
  </div>

  <div class="space-y-4 w-full">
    <dl class="p-3 rounded-lg border border-brand-light/50 bg-[#F8FAFC]/50">
      <div class="flex items-center gap-3 mb-1">
        <Icon
          name="mdi:email"
          class="h-4 w-4 text-brand-dark"
          aria-hidden="true"
        />
        <dt class="text-xs font-semibold text-brand-dark uppercase">Email</dt>
      </div>
      <dd
        class="text-sm font-medium text-brand-dark whitespace-normal break-words select-none"
        aria-label={`Email: ${user.email}`}
      >
        {user.email}
      </dd>
    </dl>
  </div>
</div>
